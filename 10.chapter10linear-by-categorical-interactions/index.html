<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Chapter10 ：Linear by categorical interactions - Alex_Wang</title><meta name="Description" content="This chapter illustrates models that involve interactions of categorical and continuous variables."><meta property="og:title" content="Chapter10 ：Linear by categorical interactions" />
<meta property="og:description" content="This chapter illustrates models that involve interactions of categorical and continuous variables." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://forest293.github.io/10.chapter10linear-by-categorical-interactions/" /><meta property="og:image" content="https://forest293.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T16:29:41+08:00" />
<meta property="article:modified_time" content="2024-01-09T23:45:40+08:00" /><meta property="og:site_name" content="Alex_Wang" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://forest293.github.io/logo.png"/>

<meta name="twitter:title" content="Chapter10 ：Linear by categorical interactions"/>
<meta name="twitter:description" content="This chapter illustrates models that involve interactions of categorical and continuous variables."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://forest293.github.io/10.chapter10linear-by-categorical-interactions/" /><link rel="prev" href="https://forest293.github.io/9.chapter9categorical-by-categorical-by-categorical-interactions/" /><link rel="next" href="https://forest293.github.io/11.chapter11polynomial-by-categorical-interactions/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Chapter10 ：Linear by categorical interactions",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/forest293.github.io\/10.chapter10linear-by-categorical-interactions\/"
        },"image": ["https:\/\/forest293.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Interaction, stata","wordcount":  3540 ,
        "url": "https:\/\/forest293.github.io\/10.chapter10linear-by-categorical-interactions\/","datePublished": "2024-01-09T16:29:41+08:00","dateModified": "2024-01-09T23:45:40+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/forest293.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Alex_Wang"
            },"description": "This chapter illustrates models that involve interactions of categorical and continuous variables."
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Alex_Wang">Alex Wang</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/10.chapter10linear-by-categorical-interactions/" selected>简体中文</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Alex_Wang">Alex Wang</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/10.chapter10linear-by-categorical-interactions/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Chapter10 ：Linear by categorical interactions</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Alex_Wang</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/interpreting-and-visualizing-regression-models-using-stata/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Interpreting and Visualizing Regression Models Using Stata</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-01-09">2024-01-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 3540 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 8 分钟&nbsp;<span id="/10.chapter10linear-by-categorical-interactions/" class="leancloud_visitors" data-flag-title="Chapter10 ：Linear by categorical interactions">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-linear-and-two-level-categorical-no-interaction">1 Linear and two-level categorical: No interaction</a>
      <ul>
        <li><a href="#11-overview">1.1 Overview</a></li>
        <li><a href="#12-examples-using-the-gss">1.2 Examples using the GSS</a>
          <ul>
            <li><a href="#121-unadjusted-means">1.2.1 Unadjusted means</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#2-linear-by-two-level-categorical-interactions">2 Linear by two-level categorical interactions</a>
      <ul>
        <li><a href="#21-overview">2.1 Overview</a></li>
        <li><a href="#22-examples-using-the-gss">2.2 Examples using the GSS</a>
          <ul>
            <li><a href="#221-estimates-of-slopes">2.2.1 Estimates of slopes</a></li>
            <li><a href="#222-estimates-and-contrasts-on-means">2.2.2 Estimates and contrasts on means</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#3-linear-by-three-level-categorical-interactions">3 Linear by three-level categorical interactions</a>
      <ul>
        <li><a href="#31-examples-using-the-gss">3.1 Examples using the GSS</a>
          <ul>
            <li><a href="#311-estimates-and-contrasts-on-slopes">3.1.1 Estimates and contrasts on slopes</a></li>
            <li><a href="#312-estimates-and-contrasts-on-means">3.1.2 Estimates and contrasts on means</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>This chapter illustrates models that involve interactions of categorical and continuous variables.</p>
<h2 id="1-linear-and-two-level-categorical-no-interaction">1 Linear and two-level categorical: No interaction</h2>
<h3 id="11-overview">1.1 Overview</h3>
<p><strong>This section introduces the concepts involving models that combine continuous and categorical predictors with no interaction.</strong> Let’s begin by considering a hypothetical simple regression model predicting income from age, focusing on people who are aged 22 to 55.</p>
<p>$$ \widehat{realrinc}=9000 + 400age $$</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.10.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Simple linear regression predicting income from age</strong></figcaption>
</figure>
<p>Let’s now expand upon this model and introduce a categorical variable with two levels reflecting whether the respondent graduated college (named cograd in the dataset gss_ivrm.dta). It is coded 0 if the respondent did not graduate college and 1 if the respondent did graduate college.</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.11.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>One continuous and one categorical predictor with labels for slopes and intercepts</strong></figcaption>
</figure>
<p>the intercept for those who did not graduate college is 4,000 and for those who did graduate college is 21,000. The difference in theseintercepts is 17,000.</p>
<p>One equation is given for noncollege graduates and another for college graduates, as shown below.</p>
<p>$$ Noncollege - graduate:\widehat{realrinc}=4000 + 400age $$
$$ College - graduate:\widehat{realrinc}=21000 + 400age $$</p>
<p>This regression model can also be expressed as one equation, as shown below.</p>
<p>$$ \widehat{realrinc}=4000 + 17000cograd + 400age $$</p>
<p>The predicted values at 30, 40, and 50 years of age have been computed both for those who did and for those who did not graduate college and are graphed in figure below：</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.12.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>One continuous and one categorical predictor with labels for predicted values</strong></figcaption>
</figure>
<h3 id="12-examples-using-the-gss">1.2 Examples using the GSS</h3>
<p>This section applies the model predicting realrinc from age and cograd using the GSS dataset.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  use gss_ivrm.dta
</span></span><span class="line"><span class="cl">  keep if age&gt;=22 &amp; age&lt;=55
</span></span><span class="line"><span class="cl">  reg realrinc age i.cograd female,vce(robust)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Linear regression                               Number of obs     =     25,718
                                                    F(3, 25714)       =     906.12
                                                    Prob &gt; F          =     0.0000
                                                    R-squared         =     0.1569
                                                    Root MSE          =      23938
    
    ------------------------------------------------------------------------------
                 |               Robust
        realrinc | Coefficient  std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
             age |     539.90      15.27    35.36   0.000       509.98      569.83
                 |
          cograd |
        CO Grad  |   14176.56     425.16    33.34   0.000     13343.22    15009.90
          female |  -12119.58     295.27   -41.05   0.000    -12698.33   -11540.83
           _cons |    4171.57     518.76     8.04   0.000      3154.76     5188.37
    ------------------------------------------------------------------------------
</code></pre>
<p>Before interpreting the coefficients for this model, let’s create a graph showing the adjusted means as a function of age and cograd.2 First, we use the margins command to compute the adjusted means at ages 22 and 55 for each level of cograd.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd,nopvalues at(age=(22 55)) vsquish
</span></span><span class="line"><span class="cl">  marginsplot,noci
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    1._at: age = 22
    2._at: age = 55
    
    ----------------------------------------------------------------
                   |            Delta-method
                   |     Margin   std. err.     [95% conf. interval]
    ---------------+------------------------------------------------
        _at#cograd |
    1#Not CO Grad  |   10048.09     216.20       9624.33    10471.85
        1#CO Grad  |   24224.65     398.82      23442.95    25006.35
    2#Not CO Grad  |   27864.91     344.23      27190.20    28539.62
        2#CO Grad  |   42041.46     553.37      40956.82    43126.11
    ----------------------------------------------------------------
</code></pre>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.13.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong> Fitted values of continuous and categorical model without interaction</strong></figcaption>
</figure>
<p>These parallel lines have the same slope, as represented by the coefficient for age. Regardless of whether you graduated college, the age slope is 539.90.</p>
<p>We can use the margins command to compute adjusted means based on this model. For example, the adjusted mean for someone who graduated college and was 40 years old, adjusting for gender, is 33,942.91.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,nopvalues at(cograd=1 age=40)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age    = 40
        cograd =  1
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
           _cons |   33942.91     419.99      33119.71    34766.11
    --------------------------------------------------------------
</code></pre>
<p>Let’s repeat this command, but this time obtain the adjusted means separately for those who did and for those who did not graduate college.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd,nopvalues at(age=40)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age = 40
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
          cograd |
    Not CO Grad  |   19766.35     151.46      19469.48    20063.23
        CO Grad  |   33942.91     419.99      33119.71    34766.11
    --------------------------------------------------------------
</code></pre>
<p>Note the difference between these two values corresponds to the main effect of cograd. Here $33942.91 - 19766.35 = 14176.56$ . You could repeat the above command for any given level of age and the difference in the adjusted means would remain the same.</p>
<p>The adjusted means are computed by setting all the covariates (that is, age and female) to the average value of the entire sample. In this example, adding the at((mean) age female) option specifies that age and female should be held constant at their mean.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd,nopvalues at((mean) age female) 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Adjusted predictions                                    Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age    = 37.28214 (mean)
        female = .4951785 (mean)
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
          cograd |
    Not CO Grad  |   18298.97     129.82      18044.52    18553.42
        CO Grad  |   32475.53     405.08      31681.55    33269.50
    --------------------------------------------------------------
</code></pre>
<p>The adjusted mean for noncollege graduates is 18,298.97, compared with 32,475.53 for college graduates. <strong>The difference in these means is sometimes called the marginal effect at the mean, because the effect is computed at the mean of the covariates.</strong></p>
<p>Based on this example, you might think that you would need to specify each of the covariates in the at() option to compute adjusted means. However, we can use the margins command below and obtain the same results.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd,nopvalues
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
          cograd |
    Not CO Grad  |   18298.97     129.82      18044.52    18553.42
        CO Grad  |   32475.53     405.08      31681.55    33269.50
    --------------------------------------------------------------
</code></pre>
<p>The difference in these means, although the same, is sometimes called the <strong>average marginal effect.</strong> In a linear model (for example, following the regress command), the marginal effect at the mean and average marginal effect methods provide the same results.</p>
<h4 id="121-unadjusted-means">1.2.1 Unadjusted means</h4>
<p>computing the unadjusted mean of income separately for college graduates and noncollage graduates</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,nopvalues over(cograd) 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    Over:       cograd
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
          cograd |
    Not CO Grad  |   18157.94     128.42      17906.24    18409.65
        CO Grad  |   32821.99     408.30      32021.69    33622.28
    --------------------------------------------------------------
</code></pre>
<h2 id="2-linear-by-two-level-categorical-interactions">2 Linear by two-level categorical interactions</h2>
<h3 id="21-overview">2.1 Overview</h3>
<p>Let’s build upon the model that was illustrated by including age and cograd as predictors, as well as the interaction between age and cograd.</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.14.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Linear by two-level categorical predictor with labels for intercepts and slopes</strong></figcaption>
</figure>
<p>This figure includes labels showing the intercept and slope for those who did not graduate college (labeled “Int0” and “Slope0”) and the intercept and slope for those who did graduate college (labeled “Int1” and “Slope1”).</p>
<p>The regression equation for this hypothetical example can be written as shown below.</p>
<p>$$ \widehat{realrinc}=9300 + - 1300cograd + 250age + 450cograd*age $$</p>
<p>The intercept in the regression equation corresponds to the intercept for those who did not graduate college (that is, 9,300). The coefficient for cograd is the difference in the intercepts (that is, ). Note how this represents the difference between a college graduate versus a noncollege graduate when age is held constant at zero <strong>(which is implausible and completely absurd)</strong>. This is often called the main effect of cograd, but that is misleading because in the presence of the interaction, this term represents the effect of cograd when age is held constant at zero.</p>
<p>The interaction term (cograd*age) is the difference in the slopes comparing those who graduated college with those who did not graduate college (that is,$700 - 250 = 450$ ). This interaction term compares the slope of college graduates with the slope of noncollege graduates.</p>
<p>It can be easier to understand this model when it is written as two equations</p>
<p>$$ Noncollege - graduate:\widehat{realrinc}=9300 + 250age $$
$$ College - graduate:\widehat{realrinc}=8000 + 700age $$</p>
<h3 id="22-examples-using-the-gss">2.2 Examples using the GSS</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  use gss_ivrm.dta
</span></span><span class="line"><span class="cl">  keep if age&gt;=22 &amp; age&lt;=55
</span></span><span class="line"><span class="cl">  reg realrinc i.cograd age i.cograd#c.age female,vce(robust)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Linear regression                               Number of obs     =     25,718
                                                    F(4, 25713)       =     710.76
                                                    Prob &gt; F          =     0.0000
                                                    R-squared         =     0.1661
                                                    Root MSE          =      23807
    
    ------------------------------------------------------------------------------
                 |               Robust
        realrinc | Coefficient  std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
          cograd |
        CO Grad  |   -8648.27    1426.59    -6.06   0.000    -11444.48    -5852.07
             age |     375.15      14.68    25.56   0.000       346.39      403.92
                 |
    cograd#c.age |
        CO Grad  |     607.52      42.24    14.38   0.000       524.73      690.31
                 |
          female |  -12004.56     293.46   -40.91   0.000    -12579.76   -11429.37
           _cons |   10224.97     480.32    21.29   0.000      9283.52    11166.41
    ------------------------------------------------------------------------------
</code></pre>
<p>As a shorthand, we can specify i.cograd##c.age. <strong>The ## operator includes both the main effects and interactions of the variables specified.</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  reg realrinc i.cograd##c.age female,vce(robust)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Linear regression                               Number of obs     =     25,718
                                                    F(4, 25713)       =     710.76
                                                    Prob &gt; F          =     0.0000
                                                    R-squared         =     0.1661
                                                    Root MSE          =      23807
    
    ------------------------------------------------------------------------------
                 |               Robust
        realrinc | Coefficient  std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
          cograd |
        CO Grad  |   -8648.27    1426.59    -6.06   0.000    -11444.48    -5852.07
             age |     375.15      14.68    25.56   0.000       346.39      403.92
                 |
    cograd#c.age |
        CO Grad  |     607.52      42.24    14.38   0.000       524.73      690.31
                 |
          female |  -12004.56     293.46   -40.91   0.000    -12579.76   -11429.37
           _cons |   10224.97     480.32    21.29   0.000      9283.52    11166.41
    ------------------------------------------------------------------------------
</code></pre>
<p>$$ \widehat{realrinc}=10224.97 + - 8648.27cograd + 375.15age + 607.5224cograd*age + - 12004.56female $$</p>
<p>Let’s create a graph to aid in the process of interpreting the results. compute the adjusted means for ages22 and 55 separately for each level of cograd</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd,nopvalues at(age=(22 55))  
</span></span><span class="line"><span class="cl">  marginsplot,noci
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    1._at: age = 22
    2._at: age = 55
    
    ----------------------------------------------------------------
                   |            Delta-method
                   |     Margin   std. err.     [95% conf. interval]
    ---------------+------------------------------------------------
        _at#cograd |
    1#Not CO Grad  |   12533.97     185.57      12170.25    12897.69
        1#CO Grad  |   17251.19     549.53      16174.07    18328.31
    2#Not CO Grad  |   24914.08     349.75      24228.55    25599.61
        2#CO Grad  |   49679.54     950.38      47816.74    51542.34
    ----------------------------------------------------------------
</code></pre>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.15.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Fitted values for linear by two-level categorical predictor model</strong></figcaption>
</figure>
<p>The figure indicate the slope between cograd &amp; notcograd are significant different.</p>
<h4 id="221-estimates-of-slopes">2.2.1 Estimates of slopes</h4>
<p>Let’s use the margins command to <strong>compute the age slope for college graduates and noncollege graduates.</strong> The dydx(age) option is used with the over(cograd) option to compute the age slope at each level of cograd.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age) over(cograd) 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Average marginal effects                                Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    dy/dx wrt:  age
    Over:       cograd
    
    ------------------------------------------------------------------------------
                 |            Delta-method
                 |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
    age          |
          cograd |
    Not CO Grad  |     375.15      14.68    25.56   0.000       346.39      403.92
        CO Grad  |     982.68      39.55    24.84   0.000       905.15     1060.20
    ------------------------------------------------------------------------------
</code></pre>
<h4 id="222-estimates-and-contrasts-on-means">2.2.2 Estimates and contrasts on means</h4>
<p>Let’s begin the investigation of the effect of cograd by computing the adjusted mean of income for each level of cograd, holding age constant at 30.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins cograd, nopvalues at(age=30) 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age = 30
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
          cograd |
    Not CO Grad  |   15535.21     112.55      15314.60    15755.82
        CO Grad  |   25112.61     367.24      24392.81    25832.41
    --------------------------------------------------------------
</code></pre>
<p>Now, let’s compare these two adjusted means by applying the r. contrast operator with cograd, which compares each group with the reference group.This compares group 1 (college graduates) with group 0 (noncollege graduates),</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins r.cograd,at(age=30) contrast(nowald pveffect)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of predictive margins                         Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age = 30
    
    ------------------------------------------------------------------
                              |            Delta-method
                              |   Contrast   std. err.      t    P&gt;|t|
    --------------------------+---------------------------------------
                       cograd |
    (CO Grad vs Not CO Grad)  |    9577.40     383.87    24.95   0.000
    ------------------------------------------------------------------
</code></pre>
<p>Let’s repeat this margins command, but this time specify that the comparisons should be made at three ages—30, 40, and 50.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins r.cograd,at(age=(30 40 50)) contrast(nowald pveffect) vsquish 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of predictive margins                         Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    1._at: age = 30
    2._at: age = 40
    3._at: age = 50
    
    --------------------------------------------------------------------
                                |            Delta-method
                                |   Contrast   std. err.      t    P&gt;|t|
    ----------------------------+---------------------------------------
                     cograd@_at |
    (CO Grad vs Not CO Grad) 1  |    9577.40     383.87    24.95   0.000
    (CO Grad vs Not CO Grad) 2  |   15652.62     481.42    32.51   0.000
    (CO Grad vs Not CO Grad) 3  |   21727.85     820.37    26.49   0.000
    --------------------------------------------------------------------
</code></pre>
<p>Let’s now create a graph that visualizes the differences in the adjusted means for college graduates versus noncollege graduates for each year of age from 22 to 55.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins r.cograd,at(age=(22(1)55))
</span></span><span class="line"><span class="cl">  marginsplot
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then, we use the marginsplot command to graph these differences and the confidence interval for the difference, as shown in figure below. <strong>If the confidence interval does not include zero, then the difference is significant.</strong></p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.16.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Contrasts of fitted values by age with confidence intervals</strong></figcaption>
</figure>
<h2 id="3-linear-by-three-level-categorical-interactions">3 Linear by three-level categorical interactions</h2>
<p>Let’s now explore a model in which a three-level categorical variable is interacted with a continuous variable.</p>
<p>Let’s extend the previous example by considering three educational groups: 1) non–high school graduates, 2) high school graduates, and 3) college graduates.
Although not shown in the graph, the intercept is 3,000 for group 1, 3,700 for group 2, and for group 3.</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.9.17.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Linear by three-level categorical predictor with labels for slopes</strong></figcaption>
</figure>
<p>$$ \widehat{realrinc}=3000 + 700hsgrad + -800cograd + 300age + 100hsgrad<em>age + 700cograd</em>age $$</p>
<p>The value of 3,000 is the intercept for those who did not graduate college. The coefficient for hsgrad is the difference in the intercepts between high school graduates and non–high school graduates (that is,$3700 - 3000 = 700$ ). The coefficient for cograd is the difference in the intercepts between college graduates and non–high school graduates (that is,$- 5000 - 3000 = -8000$).</p>
<p>$$ Non-hsgrad:\widehat{realrinc}=3000 + 300age $$
$$ Hsgrad:\widehat{realrinc}=3700 + 400age $$
$$ College-grad:\widehat{realrinc}=-5000 + 1000age $$</p>
<p>If we do not reject this null hypothesis, then the education by interaction terms may no longer be needed and could be omitted from the model. If we do reject this null hypothesis, we might be further interested in forming specific contrasts among the slopes.</p>
<p>We might be further interested in forming specific contrasts among the slopes, for example, We might be interested in comparing the different educational groups given different levels of age. As an illustration, the predicted mean of income for those aged 30, 40, and 50 for eacheducational group have been computed and are plotted in figure below.</p>
<h3 id="31-examples-using-the-gss">3.1 Examples using the GSS</h3>
<p>Let’s continue to use age as the continuous predictor and realrinc as the outcome, but now we will use a three-category education variable, educ3.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  use gss_ivrm.dta
</span></span><span class="line"><span class="cl">  keep if age&gt;=22 &amp; age&lt;=55
</span></span><span class="line"><span class="cl">  reg realrinc i.educ3##c.age female,vce(robust)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Linear regression                               Number of obs     =     25,718
                                                    F(6, 25711)       =     563.58
                                                    Prob &gt; F          =     0.0000
                                                    R-squared         =     0.1728
                                                    Root MSE          =      23712
    
    ------------------------------------------------------------------------------
                 |               Robust
        realrinc | Coefficient  std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
           educ3 |
             HS  |    1906.98    1098.01     1.74   0.082      -245.18     4059.14
           Coll  |   -6287.54    1643.87    -3.82   0.000     -9509.63    -3065.46
                 |
             age |     299.15      28.35    10.55   0.000       243.58      354.72
                 |
     educ3#c.age |
             HS  |     120.00      32.96     3.64   0.000        55.40      184.60
           Coll  |     682.88      48.71    14.02   0.000       587.42      778.35
                 |
          female |  -12258.80     293.44   -41.78   0.000    -12833.96   -11683.63
           _cons |    8012.50     944.86     8.48   0.000      6160.51     9864.49
    ------------------------------------------------------------------------------
</code></pre>
<p>Before interpreting these results, let’s make a graph showing the adjusted means by age and educ3.
compute the adjusted means at ages22 and 55 for each level of educ3</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins educ3,nopvalues at(age=(22 55))   
</span></span><span class="line"><span class="cl">  marginsplot,noci
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    1._at: age = 22
    2._at: age = 55
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
       _at#educ3 |
       1#not hs  |    8523.52     361.18       7815.59     9231.45
           1#HS  |   13070.41     208.67      12661.40    13479.43
         1#Coll  |   17259.39     549.76      16181.83    18336.94
       2#not hs  |   18395.49     655.31      17111.04    19679.94
           2#HS  |   26902.25     405.94      26106.58    27697.93
         2#Coll  |   49666.47     950.09      47804.25    51528.69
    --------------------------------------------------------------
</code></pre>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.11.1.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Fitted values for linear by three-level categorical predictor model</strong></figcaption>
</figure>
<p>The dydx(age) is combined with the over(educ3) option to compute the age slope separately for each level of educ3.</p>
<h4 id="311-estimates-and-contrasts-on-slopes">3.1.1 Estimates and contrasts on slopes</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age) over(educ3) 
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Average marginal effects                                Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    dy/dx wrt:  age
    Over:       educ3
    
    ------------------------------------------------------------------------------
                 |            Delta-method
                 |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
    -------------+----------------------------------------------------------------
    age          |
           educ3 |
         not hs  |     299.15      28.35    10.55   0.000       243.58      354.72
             HS  |     419.15      16.85    24.87   0.000       386.12      452.18
           Coll  |     982.03      39.55    24.83   0.000       904.51     1059.55
    ------------------------------------------------------------------------------
</code></pre>
<p>The output not only shows the age slope at each level of educ3 but also includes the standard error, confidence interval, and a test of whether the slope is significantly different from 0.</p>
<p>Let’s test whether these slopes are equal to each other. In other words,let’s test the null hypothesis：</p>
<p>$$ H_{0} = \beta{1} = \beta{2} = \beta{3} $$</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  contrast educ3#c.age
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of marginal linear predictions
    
    Margins: asbalanced
    
    ------------------------------------------------
                 |         df           F        P&gt;F
    -------------+----------------------------------
     educ3#c.age |          2      105.89     0.0000
                 |
     Denominator |      25711
    ------------------------------------------------
</code></pre>
<p>This interaction is significant, so we can reject the null hypothesis that these slopes are all equal.</p>
<p>$$ H_{0} = \beta{1} = \beta{3}  $$<br>
$$ H_{0} = \beta{2} = \beta{3}  $$</p>
<p>The following contrast command tests these two null hypotheses.Specifying rb3.educ3 uses reference group comparisons with group 3 as the baseline (comparison) group. We can reject both null hypotheses.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  contrast rb3.educ3#c.age,nowald pveffect
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of marginal linear predictions
    
    Margins: asbalanced
    
    ----------------------------------------------------------
                      |   Contrast   Std. err.      t    P&gt;|t|
    ------------------+---------------------------------------
          educ3#c.age |
    (not hs vs Coll)  |    -682.88      48.71   -14.02   0.000
        (HS vs Coll)  |    -562.89      43.03   -13.08   0.000
    ----------------------------------------------------------
</code></pre>
<p>Let’s try using the j. contrast operator that compares each group with the mean of the previous levels, as shown below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  contrast j.educ3#c.age,nowald pveffect
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of marginal linear predictions
    
    Margins: asbalanced
    
    ---------------------------------------------------------
                     |   Contrast   Std. err.      t    P&gt;|t|
    -----------------+---------------------------------------
         educ3#c.age |
    (HS vs  not hs)  |     120.00      32.96     3.64   0.000
    (Coll vs &lt;Coll)  |     622.88      42.90    14.52   0.000
    ---------------------------------------------------------
</code></pre>
<h4 id="312-estimates-and-contrasts-on-means">3.1.2 Estimates and contrasts on means</h4>
<p>Another way we can understand this interaction is to examine the differences in the adjusted means among the levels of educ3 for a specified level (or levels) of age</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins educ3,nopvalues at(age=30)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Predictive margins                                      Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age = 30
    
    --------------------------------------------------------------
                 |            Delta-method
                 |     Margin   std. err.     [95% conf. interval]
    -------------+------------------------------------------------
           educ3 |
         not hs  |   10916.72     205.36      10514.21    11319.23
             HS  |   16423.59     127.05      16174.56    16672.61
           Coll  |   25115.65     367.37      24395.58    25835.72
    --------------------------------------------------------------
</code></pre>
<p>Let’s test the equality of these means by adding the contrast(overall) option. This tests the equality of the adjusted means across the levels of educ3 when age is held constant at 30. This test is significant.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins educ3,at(age=30) contrast(overall)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of predictive margins                         Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    At: age = 30
    
    ------------------------------------------------
                 |         df           F        P&gt;F
    -------------+----------------------------------
           educ3 |          2      593.45     0.0000
                 |
     Denominator |      25711
    ------------------------------------------------
</code></pre>
<p>Let’s use the ar. contrast operator to perform adjacent group contrasts on educ3 while holding age constant at 30 40 and 50.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins ar.educ3,at(age=(30 40 50)) contrast(nowald pveffect)
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>    Contrasts of predictive margins                         Number of obs = 25,718
    Model VCE: Robust
    
    Expression: Linear prediction, predict()
    1._at: age = 30
    2._at: age = 40
    3._at: age = 50
    
    ----------------------------------------------------------
                      |            Delta-method
                      |   Contrast   std. err.      t    P&gt;|t|
    ------------------+---------------------------------------
            educ3@_at |
    (HS vs not hs) 1  |    5506.86     242.88    22.67   0.000
    (HS vs not hs) 2  |    6706.82     333.60    20.10   0.000
    (HS vs not hs) 3  |    7906.78     617.12    12.81   0.000
      (Coll vs HS) 1  |    8692.06     387.21    22.45   0.000
      (Coll vs HS) 2  |   14320.93     488.59    29.31   0.000
      (Coll vs HS) 3  |   19949.79     835.38    23.88   0.000
    ----------------------------------------------------------
</code></pre>
<p>Say that we wanted to form the same comparisons on education (that is, specifying ar.educ3) but spanning the ages ranging from 22 to 55. We can create a graph that illustrates such comparisons using the margins and marginsplot commands.</p>
<p>First, the margins command is used, applying the ar. contrast operator to educ combined with the at() option. This performs the contrasts of education groups 2 versus 1 (high school graduates versus non–high school graduates) and education group 3 versus 2 (college graduates versus high school graduates) holding age constant at every value ranging from 22 to 55 years of age.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins ar.educ3,at(age=(22(1)55))
</span></span><span class="line"><span class="cl">  marginsplot,recast(line)recastci(rarea) bydimension(educ3)
</span></span></code></pre></td></tr></table>
</div>
</div><figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.11.2.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>Adjacent contrasts on education by age with confidence intervals, as two graph panels</strong></figcaption>
</figure></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2024-01-09</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/10.chapter10linear-by-categorical-interactions/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/interaction/">Interaction</a>,&nbsp;<a href="/tags/stata/">stata</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/9.chapter9categorical-by-categorical-by-categorical-interactions/" class="prev" rel="prev" title="Chapter9 ：Categorical by categorical by categorical interactions"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Chapter9 ：Categorical by categorical by categorical interactions</a>
            <a href="/11.chapter11polynomial-by-categorical-interactions/" class="next" rel="next" title="Chapter11 ：Polynomial by categorical interactions">Chapter11 ：Polynomial by categorical interactions<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Alex_Wang</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
