<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Chapter6 ：Continuous by continuous by continuous interactions - Alex_Wang</title><meta name="Description" content="This chapter explores models that involve the interaction of three continuous linear predictors."><meta property="og:title" content="Chapter6 ：Continuous by continuous by continuous interactions" />
<meta property="og:description" content="This chapter explores models that involve the interaction of three continuous linear predictors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://forest293.github.io/6.continuous-by-continuous-by-continuous-interactions/" /><meta property="og:image" content="https://forest293.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T16:29:41+08:00" />
<meta property="article:modified_time" content="2024-01-04T23:45:40+08:00" /><meta property="og:site_name" content="Alex_Wang" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://forest293.github.io/logo.png"/>

<meta name="twitter:title" content="Chapter6 ：Continuous by continuous by continuous interactions"/>
<meta name="twitter:description" content="This chapter explores models that involve the interaction of three continuous linear predictors."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://forest293.github.io/6.continuous-by-continuous-by-continuous-interactions/" /><link rel="prev" href="https://forest293.github.io/5.continuous-by-continuous-interactions/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Chapter6 ：Continuous by continuous by continuous interactions",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/forest293.github.io\/6.continuous-by-continuous-by-continuous-interactions\/"
        },"image": ["https:\/\/forest293.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Interaction, stata","wordcount":  2459 ,
        "url": "https:\/\/forest293.github.io\/6.continuous-by-continuous-by-continuous-interactions\/","datePublished": "2024-01-04T16:29:41+08:00","dateModified": "2024-01-04T23:45:40+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/forest293.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Alex_Wang"
            },"description": "This chapter explores models that involve the interaction of three continuous linear predictors."
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Alex_Wang">Alex Wang</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/6.continuous-by-continuous-by-continuous-interactions/" selected>简体中文</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Alex_Wang">Alex Wang</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/6.continuous-by-continuous-by-continuous-interactions/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Chapter6 ：Continuous by continuous by continuous interactions</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Alex_Wang</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/interpreting-and-visualizing-regression-models-using-stata/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Interpreting and Visualizing Regression Models Using Stata</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-01-04">2024-01-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 2459 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 5 分钟&nbsp;<span id="/6.continuous-by-continuous-by-continuous-interactions/" class="leancloud_visitors" data-flag-title="Chapter6 ：Continuous by continuous by continuous interactions">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-overview">1 Overview</a></li>
    <li><a href="#11-example-using-gss-data">1.1 Example using GSS data</a>
      <ul>
        <li><a href="#111-a-model-without-a-three-way-interaction">1.1.1 A model without a three-way interaction</a></li>
        <li><a href="#112-a-three-way-interaction-model">1.1.2 A three-way interaction model</a>
          <ul>
            <li><a href="#1121-visualizing-the-three-way-interaction">1.1.2.1 Visualizing the three-way interaction</a></li>
            <li><a href="#1122-visualizing-the-age-slope">1.1.2.2 Visualizing the age slope</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p><strong>This chapter explores models that involve the interaction of three continuous linear predictors.</strong></p>
<h2 id="1-overview">1 Overview</h2>
<p>Let’s first consider a hypothetical example looking at income (adjusted for inflation) as a function of age, education, and year born.</p>
<p>To illustrate the meaning of an interaction of these three continuous predictor, let’s first consider a model that <strong>does not include a three-way interaction.</strong></p>
<p>$$ \widehat{realrin}=3365394 + — 55747age + -66053educ + -1712yrborn + 109age * educ + 28age * yrborn + 33.2educ*yrborn$$</p>
<p>The variable age is plotted on the $x$(horizontal) axis, educ is on the $z$axis (representing depth), and the predicted value of realrinc is on the $y$(vertical) axis. Separate graphs are used to represent yrborn.The lines with respect to age are drawn thicker to help accentuate changes in the slope of the relationship between age and the outcome as a function of educ and yrborn.</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.4.3.png" style="width:450px;height:350px;" alt="图片描述">
  <figcaption><strong>Three-dimensional graph of predicted values from model without the three-way interaction</strong></figcaption>
</figure>
<p>let’s now consider a model that includes a three-way interaction.This regression model predicts realrinc from age, educ, yrborn, the two-way interactions of these predictors (age<em>educ, age</em>yrborn, and educ<em>yrborn), and the three-way interaction (age</em>educ*yrborn).</p>
<p>\begin{align}
\widehat{realrin} &amp;= -2004225 + 66407age + 313720educ + 1042yrborn +- 8524age\
\cdot educ \notag\
\end{align}</p>
<p>\begin{align}
+- 34.7age \cdot yrborn +- 161.62educ \cdot yrborn + 4.43age \
\cdot educ \cdot yrborn \notag
\end{align}</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.4.4.png" style="width:450px;height:350px;" alt="图片描述">
  <figcaption><strong>Three-dimensional graph of predicted values from model with the three-way interaction</strong></figcaption>
</figure>
<p>age on the $x$axis, educ on the $z$axis, the predicted value of realrinc on the $y$axis. Separate graphs represent yrborn for the years of birth 1930, 1940, 1950, and 1960 shown from left to right and then top to bottom</p>
<ul>
<li>For those born in 1930 (the top left panel), the age slope is mildly negative for those with 12 years of education and remains mildly negative across the different levels of education.</li>
<li>Skipping forward to those born in 1960 (the bottom right panel), the age slope is mildly positive for those with 12 years of education and is sharply positive for those with 20 years of education.</li>
<li>Looking across the panels from those born in 1930 (top left) to those born in 1960 (bottom right), we can see how the increase in the age slope due to higher levels of education grows as the year of birthincreases from 1930 to 1960.</li>
<li>For those born in 1930, the age slope remains largely the same for all education levels. By contrast, for those born in 1960, the age slope increases considerably with increasing levels of educ. In other words, the size of the age<em>educ interaction changes as a function of yrborn. This is a result of, and a way to describe, the interaction of age</em>educ*yrborn.</li>
</ul>
<p>Let’s see how these models can be visualized using two-dimensional graphs.</p>
<figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.5.1.png" style="width:450px;height:350px;" alt="图片描述">
  <figcaption><strong>Two-dimensional graph of adjusted means for model with the threeway interaction</strong></figcaption>
</figure>
<p>In 1960, the age slope increases considerably with increasing education. We can compare how the age slope changes as a function of education for those born in 1930 with those born in 1960.
For those born in 1930, the age slope remains mildly negative for all levels of education. By contrast, for those born in 1960, the age slope grows increasingly positive with increasing levels of education.
As we saw in the three-dimensional graph, this two-dimensional graph illustrates how the age×educ interaction changes as a function of yrborn, which is another way of saying that there is an age × educ × yrborn interaction.</p>
<h2 id="11-example-using-gss-data">1.1 Example using GSS data</h2>
<p>Let’s now illustrate a model with an interaction of three continuous variables using the GSS dataset. This example predicts realrinc from age, educ, and yrborn.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  use gss_ivrm.dta
</span></span><span class="line"><span class="cl">  keep if (age&gt;=30 &amp; age&lt;=55) &amp; (educ&gt;=12) &amp; (yrborn&gt;=1930 &amp; yrborn&lt;=1960)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="111-a-model-without-a-three-way-interaction">1.1.1 A model without a three-way interaction</h3>
<pre><code> Linear regression                               Number of obs     =     11,765
                                                 F(8, 11756)       =     138.87
                                                 Prob &gt; F          =     0.0000
                                                 R-squared         =     0.1142
                                                 Root MSE          =      24595
</code></pre>
<hr>
<pre><code>                 |               Robust
        realrinc | Coefficient  std. err.      t    P&gt;|t|
 
             age |  -48960.89    8316.82    -5.89   0.000
            educ |  -61659.03   34481.49    -1.79   0.074
          yrborn |   -1529.75     290.82    -5.26   0.000
                 |
    c.age#c.educ |     109.44      18.74     5.84   0.000
                 |
  c.age#c.yrborn |      24.53       4.28     5.73   0.000
                 |
 c.educ#c.yrborn |      30.92      17.50     1.77   0.077
                 |
            race |
          black  |   -5274.18     464.22   -11.36   0.000
          other  |   -4616.74    1145.59    -4.03   0.000
                 |
           _cons |   3.01e+06  570438.47     5.28   0.000
</code></pre>
<hr>
<p>We can visualize these results using the margins and the marginsplot commands. The margins command is used to obtain the fitted value for ages 30 and 55, for educations of 12 to 20 years (in two-year increments), and for the years of birth 1930, 1940, 1950, and 1960. The marginsplot command is then used to graph these values, placing age on the $x$axis, using separate panels for yrborn, and using separate lines for educ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins, at(age=(30 55) educ=(12(2)20) yrborn=(1930(10)1960))
</span></span><span class="line"><span class="cl">  marginsplot,xdimension(age) bydimension(yrborn) ///
</span></span><span class="line"><span class="cl">              plotdimension(educ,allsimple) legend(row(2)subtitle(Education)) ///
</span></span><span class="line"><span class="cl">              recast(line) scheme(s1mono) noci ylabel(,angle(0)) 
</span></span></code></pre></td></tr></table>
</div>
</div><figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.5.2.png" style="width:450px;height:350px;" alt="图片描述">
  <figcaption><strong>Adjusted means from model without the three-way interaction, showing age on the $x$ axis, separate panels for year of birth, and separate lines for education</strong></figcaption>
</figure>
<p>Although the people born in different years might show a different age slope at 12 years of education, the increase in the age slope as a function of education is the same across the years of birth. In fact, <strong>the coefficient for c.age#c.educ describes the exact degree of this increase.</strong> For every unit increase in educ, the age slope increases by 109.44. This is true for all years of birth.</p>
<p>Let’s see this for ourselves using the margins command. The margins command below estimates the age slope for those with 14 and 15 years of education who were born in 1930.</p>
<p>result compute: -88.59 + 109.44 = 20.85</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">margins,dydx(age) at(educ=(14 15) yrborn=1930) vsquish
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code> Average marginal effects                                Number of obs = 11,765
 Model VCE: Robust
 
 Expression: Linear prediction, predict()
 dy/dx wrt:  age
 1._at: educ   =   14
        yrborn = 1930
 2._at: educ   =   15
        yrborn = 1930

 ------------------------------------------------------------------------------
              |            Delta-method
              |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
  
 age          |
          _at |
           1  |     -88.59      81.21    -1.09   0.275      -247.78       70.59
           2  |      20.85      86.72     0.24   0.810      -149.14      190.84
 ------------------------------------------------------------------------------
</code></pre>
<p>Let’s make the same comparison, except for those born in 1940.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age)at(educ=(14 15) yrborn=1940) vsquish
</span></span></code></pre></td></tr></table>
</div>
</div><p>result compute: 266.1371 - 156.6922 = 109.44</p>
<pre><code> Average marginal effects                                Number of obs = 11,765
 Model VCE: Robust

 Expression: Linear prediction, predict()
 dy/dx wrt:  age
 1._at: educ   =   14
        yrborn = 1940
 2._at: educ   =   15
        yrborn = 1940

 ------------------------------------------------------------------------------
              |            Delta-method
              |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
 -------------+----------------------------------------------------------------
 age          |
          _at |
           1  |     156.69      46.04     3.40   0.001        66.45      246.93
           2  |     266.14      53.97     4.93   0.000       160.35      371.92
 ------------------------------------------------------------------------------
</code></pre>
<h3 id="112-a-three-way-interaction-model">1.1.2 A three-way interaction model</h3>
<p>Let’s now consider a model that includes a three-way interaction of age, educ, and yrborn when predicting realrinc. Such models can <strong>have a high degree of multicollinearity that can lead to numerical instability of the estimates and inflated standard errors.</strong></p>
<p>To avoid these problems, Aiken and West (1991) recommend <strong>centering the predictors prior to the analysis.</strong></p>
<p>Let’s adopt this advice and center age, educ, and yrborn before attempting an analysis that includes the interaction of these three variables. The following generate commands create centered versions of these variables, centering them around values that I chose to ease the interpretation of the centered values.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  generate yrborn30 = yrborn - 1930
</span></span><span class="line"><span class="cl">  generate age40 = age - 40
</span></span><span class="line"><span class="cl">  generate educ16 = educ - 16
</span></span></code></pre></td></tr></table>
</div>
</div><p>The variable yrborn is centered by subtracting 1930, creating a new variable called yrborn30. This centered variable will range from 0 to 30, corresponding to the years of birth ranging from 1930 to 1960.</p>
<p>The centered version of age is called age40 and contains the value of age minus 40. An age of 30 would be represented as using the centered version of age (age40).</p>
<p>Finally, the centered version of educ is called educ16, which contains educ minus 16. We could refer to 20 years of education via the centered variable by specifying that educ16 equals 4. The rest of this section will use these centered variables for the analysis.</p>
<p>Let’s now form a model that predicts realrinc from age40, educ16, and yrborn30, the two-way interactions among these variables, and the three-way interaction of these variables.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  reg realrinc c.age40##c.educ16##c.yrborn30 i.race,vce(robust) noci
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code> Linear regression                               Number of obs     =     11,765
                                                 F(9, 11755)       =     126.24
                                                 Prob &gt; F          =     0.0000
                                                 R-squared         =     0.1145
                                                 Root MSE          =      24591

 --------------------------------------------------------------------
                             |               Robust
                    realrinc | Coefficient  std. err.      t    P&gt;|t|
 ----------------------------+---------------------------------------
                       age40 |     -27.89     135.31    -0.21   0.837
                      educ16 |    2800.94     366.46     7.64   0.000
                             |
            c.age40#c.educ16 |      26.63      42.54     0.63   0.531
                             |
                    yrborn30 |     -88.92      55.93    -1.59   0.112
                             |
          c.age40#c.yrborn30 |      32.56       6.69     4.87   0.000
                             |
         c.educ16#c.yrborn30 |      12.89      17.90     0.72   0.471
                             |
 c.age40#c.educ16#c.yrborn30 |       4.32       2.19     1.97   0.049
                             |
                        race |
                      black  |   -5279.07     463.47   -11.39   0.000
                      other  |   -4648.00    1142.81    -4.07   0.000
                             |
                       _cons |   33441.15    1161.80    28.78   0.000
 --------------------------------------------------------------------
</code></pre>
<p>We can visualize the c.age40#c.educ16#c.yrborn30 interaction in a variety of ways. We can focus on the age40 slope, the educ16 slope, or the yrborn30 slope. As we have done throughout this chapter, let’s focus our attention on the age slope (via the centered variable age40).</p>
<blockquote>
<p>Note! Retaining main effects and two-way interactions</p>
<blockquote>
<p>Looking at the estimates from the regress command, you might notice that some of the main effects and two-way interaction terms are not significant. <strong>Even though they are not significant, it is important to retain these effects to preserve the interpretation of the three-way interaction term.</strong></p>
</blockquote>
</blockquote>
<h4 id="1121-visualizing-the-three-way-interaction">1.1.2.1 Visualizing the three-way interaction</h4>
<p>The margins command is used to compute the adjusted means at different values of the centered variable using the at() option.
In terms of the uncentered variables, the at() option specifies ages 30 and 55, educations from 12 to 20 in 2-unit increments, and years of birth from 1930 to 1960 in 10-unit increments.</p>
<p>Then, the marginsplot command is used to graph the fitted values, placing age40 on the $x$ axis, with separate lines for educ16 and with separate panels for yrborn30.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins, at(age40=(-10 15) educ16=(-4(2)4) yrborn30=(0(10)30))
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  marginsplot,xdimension(age40) bydimension(yrborn30) ///
</span></span><span class="line"><span class="cl">              plotdimension(educ16,allsimple) legend(row(2) subtitle(Education)) ///
</span></span><span class="line"><span class="cl">              recast(line) scheme(s1mono) noci ylabel(, angle(0))
</span></span></code></pre></td></tr></table>
</div>
</div><figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.5.3.png" style="width:450px;height:350px;" alt="图片描述">
  <figcaption><strong>Adjusted means from model with the three-way interaction as a function of age ( $x$ axis), year of birth (separate panels), and education (separate lines)</strong></figcaption>
</figure>
<p>Let’s focus on the age40 slope, beginning with those born in 1930 (that is, yrborn30 = 0). The age40 slope is mildly negative for those born in 1930, across all levels of education.
Jumping forward to 1960 (that is, yrborn30 = 30), the age40 slope is mildly positive for those with 12 years of education and is sharply positive for those with 20 years of education. Looking across the years of birth, we can see that increasing education is more highly related to an increase in the age40 slope as the year of birth increases.</p>
<p>Let’s begin by estimating the age40 slope when yrborn30 is 0 and educ16 is and . This corresponds to those born in 1930 with 14 and 15 years of education.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age40) at(yrborn30=0 educ16=(-2 -1))vsquish
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code> Average marginal effects                                Number of obs = 11,765
 Model VCE: Robust

 Expression: Linear prediction, predict()
 dy/dx wrt:  age40
 1._at: educ16   = -2
        yrborn30 =  0
 2._at: educ16   = -1
        yrborn30 =  0

 ------------------------------------------------------------------------------
              |            Delta-method
              |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
 -------------+----------------------------------------------------------------
 age40        |
          _at |
           1  |     -81.16      80.00    -1.01   0.310      -237.98       75.66
           2  |     -54.53     102.69    -0.53   0.595      -255.81      146.76
 ------------------------------------------------------------------------------
</code></pre>
<p>The age40 slope is $-81.16$ for those with 14 years of education compared with $-54.53$ for those with 15 years of education, a gain of 26.63 units. This illustrates that a one-unit increase in education leads to a 26.63-unit increase in the age40 slope for those born in 1930.</p>
<p>Let’s now obtain the same estimates for those born one year later, born in 1931. This will allow us to assess the impact of a one-unit increase in yrborn30.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age40) at(yrborn30=1 educ16=(-2 -1))vsquish
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code> Average marginal effects                                Number of obs = 11,765
 Model VCE: Robust

 Expression: Linear prediction, predict()
 dy/dx wrt:  age40
 1._at: educ16   = -2
        yrborn30 =  1
 2._at: educ16   = -1
        yrborn30 =  1

 ------------------------------------------------------------------------------
              |            Delta-method
              |      dy/dx   std. err.      t    P&gt;|t|     [95% conf. interval]
 -------------+----------------------------------------------------------------
 age40        |
          _at |
           1  |     -57.24      76.23    -0.75   0.453      -206.67       92.19
           2  |     -26.29      98.05    -0.27   0.789      -218.49      165.91
 ------------------------------------------------------------------------------
</code></pre>
<p>For those born in 1931, the change in the age40 slope due to a one-unit increase in education is 30.95 ($-26.29- -57.24$). This is larger than the value we found for 1930. A one-unit increase in educ16 yields a larger increase in the age40 slope for those born in 1931 (30.95) than for those born in 1930 (26.63). This is due to the inclusion of the three-way interaction.</p>
<p>Consider the value we obtain if we take 30.95 minus 26.63. We obtain 4.32, which corresponds to the coefficient for the c.age40#c.educ16#c.yrborn30 interaction. This interaction can be interpreted as the degree to which the age40 slope increases as a function of educ16 for every one-unit increase in yrborn30. For every one-unit increase in yrborn30, the age40 slope increases by 4.32 units for every oneunit increase in educ16.</p>
<h4 id="1122-visualizing-the-age-slope">1.1.2.2 Visualizing the age slope</h4>
<p>We can visualize the contribution that educ16 and yrborn30 make with respect to the age40 slope using the margins and marginsplot commands.
First, the margins command is used with the dydx(age40) option to obtain estimates of the age40 slope for those with 12 to 20 years of education (in one-year increments) and those born in 1930 to 1960 (in 10-year increments).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  margins,dydx(age40) at(educ16=(-4(1)4) yrborn30=(0(10)30))
</span></span><span class="line"><span class="cl">  marginsplot,noci
</span></span></code></pre></td></tr></table>
</div>
</div><figure style="text-align:center;">
  <img src="https://cdn.jsdelivr.net/gh/forest293/Hugo-image/2024.1.5.4.png" style="width:550px;height:350px;" alt="图片描述">
  <figcaption><strong>age40 slope as a function of education ($x$ axis) and year of birth (separate lines)</strong></figcaption>
</figure>
<blockquote>
<p><strong>Centering means to subtract a constant from the variable. One form of centering is called mean centering, in which the mean is subtracted from the variable.</strong></p>
</blockquote>
<blockquote>
<p>You might wonder if the results of the following analysis would change if these variables were centered around different values. For example, suppose age was centered around 45 instead of 40. <strong>The estimates regarding the three-way interaction would remain the same, whether age was centered around 40 or 45. The estimates of the adjusted means would remain the same as well.</strong> However, there would be differences in the main effects and two-way interactions. These differences are not consequential because these lower order effects are not important in the presence of the three-way interaction term.</p>
</blockquote>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2024-01-04</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/6.continuous-by-continuous-by-continuous-interactions/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/interaction/">Interaction</a>,&nbsp;<a href="/tags/stata/">stata</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/5.continuous-by-continuous-interactions/" class="prev" rel="prev" title="Chapter5 ：Continuous by continuous interactions"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Chapter5 ：Continuous by continuous interactions</a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Alex_Wang</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
